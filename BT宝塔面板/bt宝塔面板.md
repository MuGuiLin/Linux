# 宝塔面板

### 官网：[https://www.bt.cn - 安全高效的服务器运维面板](https://www.bt.cn)

![bt-logo](D:\GitHub\Linux\BT宝塔面板\bt-logo.svg)

## 宝塔面板 相关命令详解

> 在使用宝塔面板时，当遇到宝塔面板界面异常或者服务器出现其他问题无法解决时，需要进行重启操作。
>
> 在命令行窗口中，打开进入 ` cd /www/server/panel/data/` 目录
>
> 执行 `bt` 命令 将显示宝塔面板命令行
>
> 如：/www/server/panel/data#` bt`



================================== 宝塔面板命令行 ====================================

| 序号 | 功能                     | 序号 | 功能                                     |
| ---- | ------------------------ | ---- | ---------------------------------------- |
| (1)  | 重启面板服务             | (8)  | 改面板端口                               |
| (2)  | 停止面板服务             | (9)  | 清除面板缓存                             |
| (3)  | 启动面板服务             | (10) | 清除登录限制                             |
| (4)  | 重载面板服务             | (11) | 设置是否开启IP + User-Agent验证          |
| (5)  | 修改面板密码             | (12) | 取消域名绑定限制                         |
| (6)  | 修改面板用户名           | (13) | 取消IP访问限制                           |
| (7)  | 强制修改MySQL密码        | (14) | 查看面板默认信息                         |
| (22) | 显示面板错误日志         | (15) | 清理系统垃圾                             |
| (23) | 关闭BasicAuth认证        | (16) | 修复面板(检查错误并更新面板文件到最新版) |
| (24) | 关闭动态口令认证         | (17) | 设置日志切割是否压缩                     |
| (25) | 设置是否保存文件历史副本 | (18) | 设置是否自动备份面板                     |
| (26) | 关闭面板ssl              | (19) | 关闭面板登录地区限制                     |
| (28) | 修改面板安全入口         | (29) | 取消访问设备验证                         |
| (0)  | 取消                     |      |                                          |

**请输入命令编号：14**

​                           

#### 重启命令

在 CentOS 下输入以下命令重启宝塔面板：

`/etc/init.d/bt restart`

#### 关闭命令

在 CentOS 下输入以下命令关闭宝塔面板：

`/etc/init.d/bt stop`

####  启动命令

在 CentOS 下输入以下命令启动宝塔面板：

`/etc/init.d/bt start`

#### 卸载

```kotlin
/etc/init.d/bt stop && chkconfig --del bt && rm -f /etc/init.d/bt && rm -rf /www/server/panel
```

#### 查看当前面板端口

```kotlin
cat /www/server/panel/data/port.pl
```

#### 重启宝塔的Nginx

```kotlin
/etc/init.d/nginx restart
```

#### 宝塔nginx 配置文件的路径

```undefined
根据域名命名 或者 默认
/www/server/panel/vhost/nginx
```







## 宝塔面板的密码忘记了怎么办？

#### 解决方法

- 进入ssh，**推荐先安装 [堡塔SSH客户端](https://www.bt.cn/download/term.html) (免费/简单/中文/多屏)** 

- 输入以下命令重置密码（把命令最后面的  “**testpasswd**” **替换**成你要改的新密码） 

    注：若是debian/ubuntu用户，请使用有root权限的账户去执行这条命令：

     cd /www/server/panel && btpython tools.py panel testpasswd![img](https://www.bt.cn/bbs/data/attachment/forum/201703/08/190708bg391o1q032g1z91.png)   

    - 紫框即你要修改的密码 
    - 红框即面板账户
    - 如果提示多次登录失败，暂时禁止登录
    -  请输入以下命令 清除登录限制 rm -f /www/server/panel/data/*.login



## 宝塔面板在开启/关闭防火墙/设置端口时报错了！

#### 可能原因

**提示：xxx规则失败:/bin/sh: ufw: command not found**

在使用宝塔（BT Panel）面板管理服务器时，如果你遇到“/bin/sh: ufw: command not found”的错误，这通常意味着`ufw`（Uncomplicated Firewall，一个在Ubuntu及其衍生版本中常用的防火墙工具）没有安装在你的服务器上。

#### 解决方法

在服务器上安装好`ufw`就OK了

```shell
sudo apt update
sudo apt install ufw
```



## 宝塔面板链接被重置怎么恢复？

###### 时间 : 2024-01-30 19:27:02

#### 最佳答案

> 遇到宝塔面板链接被重置的情况，可能是由于各种原因导致配置文件丢失或损坏，需要进行一些操作来恢复链接。以下是一些可能的解决方法：

1. 检查配置文件：确保宝塔面板的配置文件是否存在。在 Linux 系统中，默认的配置文件路径是`/www/server/panel/data/admin_path.pl`，在 Windows 系统中，默认的配置文件路径是`D:\www\server\panel\data\admin_path.pl`。如果配置文件丢失或损坏，可以尝试将备份的配置文件恢复到正确的路径。

2. 重新设置宝塔面板链接：如果配置文件存在且正确，但仍无法通过宝塔面板链接访问，可以尝试重新设置宝塔面板链接。打开`/www/server/panel/data/admin_path.pl`或`D:\www\server\panel\data\admin_path.pl`文件，找到`admin_path`的值，将其修改为一个新的链接地址。保存文件后，尝试使用新的链接地址访问宝塔面板。

3. 检查端口和防火墙设置：确认宝塔面板所使用的端口是否被正确映射并开放。在宝塔面板中，默认的端口是8888。确保路由器、防火墙以及服务器上的相应端口映射设置正确，并且没有被屏蔽。

4. 重启宝塔面板服务：有时候，重启宝塔面板服务可以解决链接重置的问题。在 Linux 系统中，可以使用以下命令重启服务：`service bt restart`。在 Windows 系统中，可以通过任务管理器或者服务管理器找到宝塔面板服务，然后重启它。

如果以上方法都无法解决问题，建议联系宝塔面板的官方支持团队，向他们说明你遇到的问题，让他们提供更详细的帮助和解决方案。

#### 其他答案

> 如果宝塔面板的链接被重置了，可能是由于多种原因造成的，比如系统升级、网络异常或者配置文件错误等。不过不用担心，以下是一些恢复宝塔面板链接的方法，你可以尝试一下：

1. 检查宝塔面板配置文件：首先确认宝塔面板的配置文件是否存在，通常在 /www/server/panel 目录下。检查是否存在一个名为`panel/data/default.db`的文件，这是面板的主要配置文件。如果不存在，可能需要重新安装宝塔面板。

2. 重启面板服务：如果配置文件存在，可以尝试重启面板服务来恢复链接。在命令行中输入以下命令重启宝塔面板服务：

`/etc/init.d/bt restart`

3. 检查宝塔面板端口：宝塔面板默认使用8888端口，在浏览器中访问时需要确保该端口没有被其他程序占用。你可以使用以下命令检查端口占用情况：

`netstat -tln | grep 8888`

如果有其他程序占用了8888端口，可以尝试修改宝塔面板的端口号，具体方法可以参考宝塔面板的官方文档或者论坛。

4. 检查防火墙设置：有时候防火墙也会导致宝塔面板无法访问。可以检查一下服务器上的防火墙设置，确保宝塔面板所使用的端口没有被阻止。你可以尝试暂时关闭防火墙，然后再次尝试访问宝塔面板。

5. 重装宝塔面板：如果以上方法都无法解决问题，你可以尝试重新安装宝塔面板。首先备份好你的数据，然后按照宝塔面板的官方教程进行重新安装。

总结一下，当宝塔面板的链接被重置后，可以通过检查配置文件、重启面板服务、检查端口占用、检查防火墙设置和重新安装面板等方法来恢复链接。希望以上方法可以帮助你解决问题。如果问题仍然存在，建议咨询宝塔面板的官方技术支持。





## 网站可以正常访问，但宝塔面板却打不开是怎么回事？

#### 问题背景

> 宝塔面板是一款常用的服务器管理工具，可用于管理网站、数据库、FTP等。然而，有时候我们可能会遇到宝塔面板无法访问的情况，而网站本身又能正常运行。这种情况下，我们需要找到原因并解决问题。

#### 可能原因

宝塔面板无法访问但网站正常的问题可能由以下几个原因造成：

- 网络故障：检查网络连接是否正常，确保能够正常访问互联网。可以尝试重启路由器或更换网络连接方式。

- 防火墙设置：某些防火墙可能会阻止对宝塔面板的访问。请检查服务器上的防火墙规则，确保允许宝塔面板的访问。

- 端口冲突：宝塔面板默认使用8888端口进行访问，如果该端口被其他程序占用，则会导致无法正常访问。可以尝试修改宝塔面板的访问端口。

- 配置文件错误：宝塔面板的配置文件可能发生错误，导致无法正常访问。可以尝试重启宝塔面板或者重新配置相关文件。

- https问题：配置https后，仍然用http访问，这一点特别需要注意，如果你的宝塔面板开启了https后，仍然用http访问，就无法打开宝塔面板，因为也没有设置http跳转到https。

####  解决方法

针对以上可能的原因，我们可以采取以下措施解决宝塔面板无法访问的问题：

- 检查网络连接：首先，我们需要确保服务器的网络连接正常。可以通过ping命令测试服务器是否能够正常连接互联网。如果网络连接有问题，可以尝试重启路由器或者与网络管理员联系解决。

- 检查防火墙设置：如果服务器上启用了防火墙，需要检查防火墙规则是否拦截了宝塔面板的访问。可以通过关闭防火墙或者添加相应规则来解决问题。

- 修改访问端口：如果8888端口被占用，可以修改宝塔面板的访问端口。具体修改方法可以参考宝塔面板的官方文档或者相关论坛帖子。

- 重启宝塔面板：如果配置文件发生错误或者其他原因导致宝塔面板无法访问，可以尝试重启宝塔面板服务。具体操作可以使用命令行工具重启或者通过宝塔面板的控制台进行重启。

- 使用https访问：只要把访问地址前面的http改成https即可。

#### 总结

> 当宝塔面板无法访问但网站正常运行时，我们需要逐步排查问题的可能原因，并采取相应的解决方法。首先检查网络连接和防火墙设置，然后尝试修改访问端口或者重启宝塔面板服务。如果问题仍未解决，可以参考宝塔面板的官方文档或者寻求技术论坛的帮助。





## 腾讯云服务器重启登录不了

#### 问题描述

在重启了腾讯云服务器（实例已启动成功）后，公网和内网的IP都ping不通，用VNC登录不了，即便是重置密码后，也登录不了。



#### 问题原因

经排查后，发现缺少netplan模块，导致在重启系统后，网卡没有获取到IP信息。



#### 解决方法

重新安装 apt install netplan 模块就解决了。
