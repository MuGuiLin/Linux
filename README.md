# Linux系统常用命令

~# **cd **

> 能功说明：在命令窗口中打开指目录
>
> 语法格式：cd [目录名]
>
> 演示实例：
>
> ```	bash
> cd / #进入Linux系统的根目录
> cd ~ #进入Linux系统当前用户根目录 【一般在系统根目录 -> home 下以用户名为目录名的目录】
> ```



~# **pwd **

> 能功说明：查看当前所在目录
>
> 语法格式：pwd



~# **ls**

>能功说明：显示当前目录的内容，常用ll命令，ll是ls -l别名。
>
>语法格式：ls [参数]
>
>参数说明：
>
>- -a 列出目录下的一切文件，包含以 . 最初的隐含文件。
>- -m 横向输出文件名，并以“，”作分格符。
>- -c 输出文件的 i 节点的修正时刻，并以此排序。
>- -R 列出一切子目录下的文件。
>- -l 列出文件的具体信息。
>- -s 在每个文件名后输出该文件的巨细。
>- -k 以 k 字节的方式表明文件的巨细。
>- -i 输出文件的 i 节点的索引信息。



~# **cat**

> cat（英文全拼：concatenate）命令用于连接文件并打印到标准输出设备上。
>
> 语法格式：cat [参数] fileName(文件名)
>
> 参数说明：
>
> - **-n 或 --number**：由 1 开始对所有输出的行数编号。
> - **-b 或 --number-nonblank**：和 -n 相似，只不过对于空白行不编号。
> - **-s 或 --squeeze-blank**：当遇到有连续两行以上的空白行，就代换为一行的空白行。
> - **-v 或 --show-nonprinting**：使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外。
> - **-E 或 --show-ends** : 在每行结束处显示 $。
> - **-T 或 --show-tabs**: 将 TAB 字符显示为 ^I。
> - **-A, --show-all**：等价于 -vET。
> - **-e：**等价于"-vE"选项；
> - **-t：**等价于"-vT"选项；



~# **grep**

> grep 用于查找文件里符合条件的字符串，它经常与管道符`|`、`cat`、`ps`命令一起使用；主要用于查找文件中符合条件的字符串、统计文件中符合条件的字符串行数等，注：grep不显示自身进程！！
>
> 语法格式：grep [参数] [要查找的字符] fileName(文件名)
>
> 参数说明：
>
> - -o  只显示匹配的内容  --only-matching
> - -i  忽略大小写，都匹配显示出来 --ignore-case
> - -n  给匹配的内容加行号  --line-number
> - -v  反转查找，输出与模式不相符的内容  --invert-match
> - -r  递归搜索所有文件
> - -A + 长度 ： after 显示出匹配内容以及它的后面几行
>
> - -B + 长度 ：before 显示匹配内容以及他的前几行
>
> - -C + 长度 ：centre显示匹配内容并且显示他的前后几行内容
>
> - -E ：支持更多的元字符，支持扩展正则
>
> 演示实例：
>
> ```shell
> grep hello test.txt #在test.txt文件中查找 hello 字符
> grep -c hello test.txt #统计在test.txt文件中查找到 hello 字符内容的行数
> grep mupiao user.txt > /root/myName.log	# 将在test.txt文件中查找到的 mupiao 字符内容 提取到/root/myName.log文件中
> ```
>
> 
>
> **与其他命令一起使用：**
>
> ​	**grep、cat、管道符配合使用**
>
> ```bash
> cat test.txt |grep hello	#过滤test.txt文件中hello内容
> ```
>
> ​	**grep、ps、管道符配合使用**
>
> ```bash
> ps -ef|grep ssh	#过滤ssh进程信息
> ```
>
> 



~# **df**

>能功说明：用于显示 Linux 系统上的文件系统磁盘使用情况统计。
>
>语法格式：df [参数]
>
>参数说明：
>
>- -a 显示所有的具有 0 Blocks 的文件系统。
>- -h 以百分比显示目录使用情况。
>
>演示实例：
>
>``` bash
>df -h  #以百分比显示目录使用情况
>```



~# **du**

>能功说明：用于显示目录或文件的大小(显示指定的目录或文件所占用的磁盘空间)。
>
>语法格式：du [参数]
>
>参数说明：
>
>-a 显示目录中个别文件的大小。
>
>-s 仅显示总计。
>
>-h 以K，M，G为单位，提高信息的可读性。
>
>-sh 显示当前目录占用空间的总计
>
>演示实例：
>
>``` bash
>du -sh #显示当前目录占用空间的总计
>```



~# **cp**

> 能功说明：
>
> - 用于复制 文件/目录 到 一个指定的目录(如目录存就直接粘贴，不存在则创建目录并粘贴)中。
>
> 语法格式：cp [参数] [要复制的文件或目录] [要粘贴的目录]。
>
> 参数说明：
>
> - -i 如果目标文件已存在，就会询问是否覆盖。
> - -f 如果目标文件已存在，就直接覆盖。
> - -p 保留源文件 或 目录的所有属性。
> - -r 递归复制目录和文件。
> - -v 显示详细cp命令执行的操作过程。
>
> 演示实例：
>
> ```bash
> cp -i /tec/ssh/sshd_config /etc/ssh/sshd_config.bak  #将sshd_config文件制到相同目录中并命名为sshd_config.bak
> ```



~# **rm**

> 能功说明：
>
> - 用于删除文件 或 目录，【注：该命令一定要要谨慎使用！！】。
>
> 语法格式：rm [参数] [要删除的文件或目录]。
>
> 参数说明：
>
> - -i 删除二次确认(就是在执行删除操作时，会询问是否确认操作)。
> - -f 删除时 忽略不存在的文件，不显示 也不 提示任何确认信息。
> - -r 递归删除（将指定目录和子目录均递归地删除）。
> - -R 递归删除（将指定目录和子目录均递归地删除）。
> - -v 显示详细rm命令执行的操作过程。
>
> 演示实例：
>
> ```bash
> rm test.txt # 删除名为text的文本文件删除
> rm -f test.txt # 强制删除名为text的文本文件删除
> rm -rf * # 强制删除当前目录下的所有文件，不提示确认信息【注：一般都后就不能恢复了哦！】
> ```



~# **ps**

> 能功说明：
>
> - 显示当前进程的状态（类似于 windows 的任务管理器）。
>
> 语法格式：ps [参数] 
>
> 参数说明：
>
> - -A 列出所有的进程
> - -w 显示加宽可以显示较多的资讯
> - -au 显示较详细的资讯
> - -aux 显示所有包含其他使用者的进程
>
> 演示实例：
>
> ```bash
> rm test.txt # 删除名为text的文本文件删除
> rm -f test.txt # 强制删除名为text的文本文件删除
> rm -rf * # 强制删除当前目录下的所有文件，不提示确认信息【注：一般都后就不能恢复了哦！】
> ```



~# **kill**

> 能功说明：
>
> - 终止进程（类似于 windows 的任务管理器中的 结束进程）。
>
> 语法格式：kill [参数] [进程id]
>
> 参数说明：
>
> - -s 指定要送出的信息
>
> - -l 若不加[进程id]选项，则 -l 参数会列出全部的信息名称。
>
>   使用 kill -l 命令列出所有可用信号，以下是常用的信息名称：
>
>   - 1 (HUP)：重新加载进程。
>   - 9 (KILL)：强制杀死一个进程。
>   - 15 (TERM)：正常停止一个进程。
>
> 演示实例：
>
> ```bash
> kill 1236  # 终止pid为1236的进程
> kill -KILL 1236  # 强制终止pid为1236的进程
> kill -9 1236  # 彻底杀终止pid为1236的进程
> ```



~# **gzip**

> gzip是个使用广泛的压缩程序，文件经它压缩过后，其名称后面会多出".gz"的扩展名。
>
> 语法格式：
>
> gzip [-acdfhlLnNqrtvV][-S <压缩字尾字符串>][-&lt;压缩效率&gt;][--best/fast][文件...] 或 gzip [-acdfhlLnNqrtvV][-S <压缩字尾字符串>][-&lt;压缩效率&gt;][--best/fast][目录]
>
> 参数说明：
>
> - -a或--ascii 　使用ASCII文字模式。
> - -c或--stdout或--to-stdout 　把压缩后的文件输出到标准输出设备，不去更动原始文件。
> - -d或--decompress或----uncompress 　解开压缩文件。
> - -f或--force 　强行压缩文件。不理会文件名称或硬连接是否存在以及该文件是否为符号连接。
> - -h或--help 　在线帮助。
> - -l或--list 　列出压缩文件的相关信息。
> - -L或--license 　显示版本与版权信息。
> - -n或--no-name 　压缩文件时，不保存原来的文件名称及时间戳记。
> - -N或--name 　压缩文件时，保存原来的文件名称及时间戳记。
> - -q或--quiet 　不显示警告信息。
> - -r或--recursive 　递归处理，将指定目录下的所有文件及子目录一并处理。
> - -S<压缩字尾字符串>或----suffix<压缩字尾字符串> 　更改压缩字尾字符串。
> - -t或--test 　测试压缩文件是否正确无误。
> - -v或--verbose 　显示指令执行过程。
> - -V或--version 　显示版本信息。
> - -<压缩效率> 　压缩效率是一个介于1－9的数值，预设值为"6"，指定愈大的数值，压缩效率就会愈高。
> - --best 　此参数的效果和指定"-9"参数相同。
> - --fast 　此参数的效果和指定"-1"参数相同。
>
> 演示实例：
>
> ```bash
> gzip test.txt # 压缩名为text.txt文件，压缩后为test.txt.gz
> gzip *  #压缩当前所在目录下的所有文件
> 
> gzip -d test.tst.gz #解开名为text.txt.gz的压缩文件
> ```
>
> 



## 给新安装的Ubuntu系统开启root账户登录权限

1. 先用ubuntu账号用SSH方式登录，注：ubuntu账户是Ubuntu Server的默认账户，它的密码在购买服务器时可以自已设置 或 在云服务器创建成功后将这个初始密码发到站内信中。

2. ~# **cd /**

    > 进入服务器根目录，刚登录时，是在当前登录账户的目录中（就是在 /home/ubuntu /目录中）

3. 登录后执行**sudo -i**命令，将命令使用权限 从ubuntu账户 切换到 root账户

    user@ubuntu:~# **sudo -i**	

    > 改变用户对命令使用权限（在使用ubuntu系统时，刚安装的Ubuntu系统无法登陆到root用户，可以使用sudo - i命令进入root用户为其设置密码后才能使用！！！）
    >
    > 开始为“user@ubuntu:~$”,当使用该命令后，会出现输入密码的提示，之后输入密码【注：刚安装的Ubuntu系统 的root用户，密码为空】，就会变为“root@ubuntu:~#”。

4. 给root账户设置密码

    root@ubuntu:~# **sudo passwd root**

    > 执行以上命令后，要需求输入两次密码，以确认设置root账户密码【注：请牢记这个密码哦】，因为root账户是权限最大的账户，所以在刚购买 或 刚安装Ubuntu系统后 root账户是不能使用的，而且密码也是空的。

    

5. 修改sshd_config远程连接配置文件，以开启root账户

    root@ubuntu:~# **sudo vi /etc/ssh/sshd_config**

    > 执行以上命令后将打开SSH配置文件sshd_config，默认情况下，root账户是禁用状态！
    >
    > 1、找到PermitRootLogin without-password 配置项，把后面的without-password改为yes，并取消注释（去掉最前面的#号）。
    >
    > 2、找到PasswordAuthentication  把no改成yes，并取消注释（去掉最前面的#号）。
    >
    > 3、保存并退出vi编辑（按下快捷键 shift + :  然后输入wq就保存并退出了）。

6. 重启SSH远程连接服务

    root@ubuntu:~# **systemctl restart sshd**

    > 执行以上命令 或 执行/etc/init.d/ssh restart  或 执行 sudo service ssh restart 就重启SSH服务了。

7. 至此给新安装的Ubuntu系统开启root账户登录权限就大功告成了，就可以使用root账户来登录SSH等服务啦。

    

## SSH远程安全访问配置

#### 1、什么是SSH

> SSH是一种网络协议，用于计算机之间的加密登录。最早的时候，互联网通信都是明文通信，一旦被截获，内容就暴露无疑。1995年，芬兰学者Tatu Ylonen设计了SSH协议，将登录信息全部加密，成为互联网安全的一个基本解决方案，迅速在全世界获得推广，目前已经成为Linux系统的标准配置。

#### 2、**SSH的基本用法**(远程访问服务端)

> 语法格式：ssh -p 端口号 用户名@远程服务器IP地址
>
> 例如：ssh -p 22 root@127.0.0.1

#### 3、自定义SSH远程连接服务端口号

> 由于新安装的Ubuntu系统默认SSH远程连接的端口号是22，这里大多数Linux系统默认的端口号，为了安全起见，可以将这个默认的22端口号改其他的端口号也是很有必要的。

1. 用SSH登录后执行如下命令，添加自已定义端口号

    root@ubuntu:~# **sudo vi /etc/ssh/sshd_config**	

    > 编辑SSH配置文件(注：腾讯云 和 阿里云 还不一样，在云服务器后台管理 的**安全组**中添加了端口号后，还要在服务器中的SSH配置文件中的 **Port** 配置项中添加对应的端口号)


 2. 找到Port配置项 在后面输入自己要设置的端口号

    > 由于Port配置项默认是被禁用的 #Port 22，因为系统默认的SSH端口号就是22
    >
    > 所以，就另起一行 或 取消注释（去掉最前面的#号）配置自己要设置的端口号
    >
    > 如 Port 222

 3. 重启SSH远程连接服务

    root@ubuntu:~# **systemctl restart sshd**

    

 2. 查看服务器中的端口号，如查例出了自己刚才新添加了端口号，表添加成功啦

    root@ubuntu:~# **netstat -nltp** 

    

 3. 如果是云服务器还在要在控制台的安全组规则中，添加入站规则

    > 如：0.0.0.0/0		TCP:222





## 添加用户 和 用户组

用户名toot 密码 root

### 方法1

1. 添加用户 **useradd** 

    > 命令格式 useradd 用户名
    >
    > root@ubuntu:~# useradd RemoteUser01

2. 添加用户组 **groupadd** 

    > 命令格式 useradd 用户组名
    >
    > root@ubuntu:~# groupadd RemotUserGroup

3. 加入组 **usermod**

    > 命令格式 usermod -G 用户组名 用户名
    >
    > 如：将名为RemotUser01的用户 加入到 名为 RemotUserGroup的用户组中
    >
    > root@ubuntu:~# usermod -G RemotUserGroup RemotUser01

4. 查看用户 **id**

    > root@ubuntu:~# id RemoteUser01
    >
    > 注：如果id后面不加用户名，就默认显示当前登录的用户信息

### 方法2

1. 添加组 groupadd

    > root@ubuntu:~# groupadd RemoteUserGroup

2. 添加用户 并 加入组 useradd

    > 命令格式 useradd -G 用户组名 用户名
    >
    > root@ubuntu:~# useradd -G RemoteUserGroup RemoteUser01

3. 查看指定用户 id

    > root@ubuntu:~# id RemoteUser01
    >
    > 注：如果id后面不加用户名，就默认显示当前登录的用户信息

4. 册除用户 和 用户组

    > userdel -r RemoteUser01
    >
    > groupdel RemoteUserGroup



## vi 或 vim 编辑器的常用操作

> Vi是Unix及Linux系统下标准的编辑器，由美国[加州大学伯克利分校](https://baike.baidu.com/item/加州大学伯克利分校?fromModule=lemma_inlink)的[Bill Joy](https://baike.baidu.com/item/Bill Joy?fromModule=lemma_inlink)所创立 。学会它后，您将在Linux的世界里畅行无阻。

### vi编辑器的三种状态模式（命令模式、插入模式，底行模式）

##### 1、命令模式

> 命令模式为vi的初始模式。在普通权限下键入“$vi 文件名”或临时root用户下键入“# vi 文件名”（例：root@XXX-virtualBox:/ect# vi vsftpd.conf），则初始进入vi的命令模式。 编辑模式下按esc进入命令模式。网上很多写在末行模式按esc可进入命令模式，我的电脑进入末行模式后几乎所有按键都是输入，输入esc显示“^[”而不会退回到命令模式。所以如果有情况和我相同进入末行模式不能转换模式的，不要乱按回车键。
>
> 命令模式中：
>
> ZZ：退出vi
>
> h或<-左键：左移一个字符
>
> j或下键：下移一行
>
> k或上键：上移一行
>
> l或右键：右移一个字符
>
> pageDown（或ctrl+F）：下翻一屏
>
> pageUp(或ctrl+B)：上翻一屏
>
> G：移动到缓冲区的最后一行
>
> num G：移动到缓冲区中第num行
>
> gg：移动缓冲区的第一行
>
> x：删除当前光标所在位置的字符
>
> dd：删除当前光标所在行
>
> dw：删除当前光标所在位置的单词
>
> d$：删除当前光标所在位置至行尾的内容
>
> J：删除当前光标所在行行尾的换行符（拼接行）
>
> u：撤销前一编辑命令
>
> a：在当前光标后追加数据
>
> A：在当前光标所在行行尾追加数据
>
> r char：用char替换当前光标所在位置的单个字符
>
> R text：用text覆盖当前光标所在位置的数据，直到按下ESC键
>
> 很容易误按的一个命令：qq：左下角会出现“recording@”这个标识。这是vim的一个强大的功能。它可以录制一个宏，按q可停止宏录制。

##### 2、插入(编辑)模式 InsertScrLK 或 i 键

> 在命令模式中按下【i，I，o，O，a，A，r，R】等字母之后进入编辑模式。按下上述的字母时，画面的左下方可能会出现【--INSERT--或--插入--】的字样，可以做文字数据输入。各个按键含义如下：
>
> a：在光标后开始插入
>
> A：在行尾开始插入
>
> i：从光标所在位置前面开始插入
>
> I：从光标所在列的第一个非空白字元面前开始插入
>
> o：在光标所在列下新增一列并进入输入模式
>
> O：在光标所在列上方新增一列并进入输入模式
>
> ESC：返回命令模式

##### 3、底行(末行)模式 Shift + :

> 网上很多说在命令模式中输入【：】会进入末行模式，我的电脑：没有效果。需要在大写模式（按CapsLock键）再按q键最末行会出现：，注意这时不能再切换回其他模式（如果可以请留言我修改，谢谢）。可在：后输入命令
>
> :q 如果有未修改缓冲区数据，退出。
>
> :q! 取消所有对缓冲区数据的修改并退出【不保存直接退出】
>
> :w filename 将文件保存到另一个文件中
>
> :wq将缓冲区数据保存到文件中并退出
>
> :sp上下分屏
>
> :vsp左右分屏
>
> ctrl+w+w切换屏
>
> 有些资料写命令模式中输入【/】进入末行模式，和：的命令i不同，/后可输入查找内容或一些命令。如果/后输入错误的命令会自动回到命令模式。
